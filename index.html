<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠ QR ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</title>
<style>
body{font-family:sans-serif;background:#f4f6f8;margin:0;padding:10px}
h2{text-align:center}
.card{background:#fff;padding:15px;margin:10px auto;max-width:500px;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,.2)}
input,select,button{width:100%;padding:8px;margin:5px 0}
button{background:#0066ff;color:#fff;border:none;border-radius:5px}
button:hover{opacity:.9}
.hidden{display:none}
.list{font-size:14px}
hr{margin:15px 0}
</style>
</head>
<body>

<h2 id="schoolName">‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</h2>

<div class="card">
<select onchange="showSystem(this.value)">
<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</option>
<option value="student">‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</option>
<option value="teacher">‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏£‡∏π</option>
<option value="admin">‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô</option>
</select>
</div>

<!-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô -->
<div id="student" class="card hidden">
<h3>üë®‚Äçüéì ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
<input id="sid" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
<button onclick="viewStudent()">‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
<div id="studentResult"></div>
</div>

<!-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏£‡∏π -->
<div id="teacher" class="card hidden">
<h3>üë®‚Äçüè´ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏£‡∏π</h3>
<input id="teacherPass" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏£‡∏π">
<button onclick="loginTeacher()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>

<div id="teacherPanel" class="hidden">
<hr>
<select id="subjectSelect"></select>
<input id="scanSid" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
<select id="status">
<option>‡∏°‡∏≤</option>
<option>‡∏°‡∏≤‡∏™‡∏≤‡∏¢</option>
<option>‡∏Ç‡∏≤‡∏î</option>
<option>‡∏•‡∏≤‡∏Å‡∏¥‡∏à</option>
<option>‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢</option>
</select>
<button onclick="checkin()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠</button>
</div>
</div>

<!-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô -->
<div id="admin" class="card hidden">
<h3>üõ† ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô</h3>
<input id="adminPass" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
<button onclick="loginAdmin()">‡πÄ‡∏Ç‡πâ‡∏≤</button>

<div id="adminPanel" class="hidden">
<hr>
<h4>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h4>
<input id="newSchool" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
<button onclick="setSchool()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>

<hr>
<h4>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h4>
<input id="newSid" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
<input id="newSname" placeholder="‡∏ä‡∏∑‡πà‡∏≠">
<button onclick="addStudent()">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>

<hr>
<h4>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏£‡∏π</h4>
<input id="newTpass" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏£‡∏π">
<button onclick="addTeacher()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏£‡∏π</button>

<hr>
<h4>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤</h4>
<input id="newSubject" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤">
<button onclick="addSubject()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤</button>
</div>
</div>

<script>
let students = JSON.parse(localStorage.getItem("students")||"{}")
let teachers = JSON.parse(localStorage.getItem("teachers")||"[]")
let subjects = JSON.parse(localStorage.getItem("subjects")||"[]")
let school = localStorage.getItem("school")||"‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á"

document.getElementById("schoolName").innerText = school

function save(){
localStorage.setItem("students",JSON.stringify(students))
localStorage.setItem("teachers",JSON.stringify(teachers))
localStorage.setItem("subjects",JSON.stringify(subjects))
}

function showSystem(id){
["student","teacher","admin"].forEach(s=>document.getElementById(s).classList.add("hidden"))
if(id) document.getElementById(id).classList.remove("hidden")
}

function viewStudent(){
let id=sid.value
let s=students[id]
if(!s){studentResult.innerHTML="‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";return}
let html=`<b>${s.name}</b><br>`
s.log.forEach(l=>html+=`${l.date} - ${l.subj} : ${l.status}<br>`)
studentResult.innerHTML=html
}

function loginTeacher(){
if(!teachers.includes(teacherPass.value)){alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£");return}
teacherPanel.classList.remove("hidden")
subjectSelect.innerHTML=subjects.map(s=>`<option>${s}</option>`).join("")
}

function checkin(){
let id=scanSid.value
if(!students[id]){alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô");return}
students[id].log.push({
date:new Date().toLocaleDateString(),
subj:subjectSelect.value,
status:status.value
})
save()
alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß")
}

function loginAdmin(){
if(adminPass.value!="1669"){alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î");return}
adminPanel.classList.remove("hidden")
}

function setSchool(){
school=newSchool.value
localStorage.setItem("school",school)
schoolName.innerText=school
}

function addStudent(){
students[newSid.value]={name:newSname.value,log:[]}
save()
alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß")
}

function addTeacher(){
teachers.push(newTpass.value)
save()
alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏£‡∏π‡πÅ‡∏•‡πâ‡∏ß")
}

function addSubject(){
subjects.push(newSubject.value)
save()
alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤‡πÅ‡∏•‡πâ‡∏ß")
}
</script>

</body>
</html>
